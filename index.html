<!DOCTYPE html>
<html>

<head>
    <title>P5 Web Theremin</title>

    <!-- < Tweakpane GUI -->
    <script src="https://cdn.jsdelivr.net/npm/tweakpane@2.1.1/dist/tweakpane.min.js"></script>

    <!-- Embed pep.js for consistent cross-browser pointer events. -->
    <script src="https://code.jquery.com/pep/0.4.3/pep.js"></script>

    <!-- ML5 for posenet -->
    <script src="https://unpkg.com/ml5@latest/dist/ml5.min.js"></script>

    <!-- p5.js  -->
    <script src="https://cdn.jsdelivr.net/npm/p5@1.2.0/lib/p5.js"></script>

    <!-- tone.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/13.0.1/Tone.min.js"
        type="text/javascript"></script>

    <!-- font-family -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&family=Roboto:wght@400&display=swap');
    </style>

    <!-- css for grain params html gui -->
    <link rel="stylesheet" href="styles.css">

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

</head>

<body>
    <!-- show hide introduction -->
    <script>
        let isVisible = true;
        let introductionText;

        function hideIntro() {
            introductionText = document.getElementById('introduction');
            if (isVisible) {
                introductionText.style.display = 'none';
                isVisible = false;
            } else if (!isVisible) {
                introductionText.style.display = 'block';
                isVisible = true;
            }
        }
    </script>


    <div style="object-position:center">
        <div id="introduction">
            Hi there!
            <br><br>This is a virtual THEREMIN application.
            <br><br>The THEREMIN responds to your hand movements, so make sure to allow access to
            your webcam. To be able to hear anything, you will have to turn on the sound with the '►
            | ◼︎' button at the top right.
            <br><br>Move your left hand up and done to change the volume. Move your right hand
            through space to change the pitch.
            <br><br>This application has two THEREMIN sounds. The more atmospheric 'GRANULAR
            SYNTHESIS' one and the 'CLASSIC' sound.
            <br><br>Try out different sources and play around with the grain settings to fully
            explore the possible output for granular synthesis.
            To explore the classic Theremin sound, click on the '► | ◼︎' button below THEREMIN
            CLASSIC.
            <br><br>
            To use the two sounds together, activate both sounds by clicking their play
            buttons.

            <br><br>
            <button type="button" class="btn" onclick="hideIntro()">OK, GOT IT!</button>
        </div>
    </div>

    <div id="graincanvasContainer"></div>

    <!-- grain synthesis algorithm by Jacob Johnson https://github.com/j-t-johnson/granular-machine -->
    <!-- <script src="grainsynth/grainmachine.js"></script> -->

    <div id="canvas">
        <script src="canvas.js"></script>
    </div>

    <script src="positionTracking.js"></script>
    <script src="gui.js"></script>


    <div id="video-bg">
        <video controls controlsList="nofullscreen nodownload" width="700px" autoplay muted loop>
            <source src="data/video/farmersspring25fps_short.mp4" type="video/mp4">
        </video>
    </div>

</body>

</html>